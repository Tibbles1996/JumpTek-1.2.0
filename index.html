<!DOCTYPE html>
<html>
<head>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.18.0/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/pose-detection@4.5.0-nightly.7/dist/pose-detection.js"></script>
</head>
<body>
  <video id="video" autoplay playsinline></video>
  <script>
    async function go() {
      await tf.setBackend('webgl');
      await tf.ready();
      const stream = await navigator.mediaDevices.getUserMedia({video:true});
      const video = document.getElementById('video');
      video.srcObject = stream;
      await video.play();

      const detector = await poseDetection.createDetector(
        poseDetection.SupportedModels.MoveNet,
        { modelType: "MultiPose:Lightning", enable3D: true }
      );
      setInterval(async () => {
        const poses = await detector.estimatePoses(video, {maxPoses:1, enable3D:true});
        console.log("3D?", poses[0] && poses[0].keypoints3D);
      }, 500);
    }
    go();
  </script>
</body>
</html>
